<template>
  <b-collapse visible id="vertical-nav-collapse" >
    <b-dropdown variant="light" class="mb-4">
      <template #button-content>
        <b-icon icon="journals" aria-hidden="true" class="mr-1"></b-icon> Группы
      </template>
      <b-dropdown-item-button v-b-modal.modal-adding-group >
        <b-icon icon="plus" aria-hidden="true" ></b-icon>
        Добавить

        <add-group-modal id="modal-adding-group"/>
      </b-dropdown-item-button>

    </b-dropdown>


    <b-nav vertical class="bd-links w-auto">
      <b-nav-item
        v-for="(item, index) in items()"
        :active="isActive(item.id)"
        :key="item.id"
        @click="selectHandler(item.id)"
      >
        {{item.name}}
      </b-nav-item>
    </b-nav>

  </b-collapse>



</template>

<script>
import {GROUP_MUTATIONS} from "../store";
import AddGroupModal from "./AddGroupModal";
import { mapState } from "vuex";

export default {
  name: "sidebar",
  components: {AddGroupModal},
  computed: {
    ...mapState(["groupId", "groupList"]),
  },
  methods: {
    items () {
      return [
        {
          id: "-1",
          name: "Все записи",
        },
        {
          id: "-2",
          name: "Работа",
        },
        {
          id: "-3",
          name: "Вуз",
        },
        {
          id: "-4",
          name: "Игры",
        },
        {
          id: "-5",
          name: "Соцсети",
        },

        ...this.groupList.map(item=>({
          id: item._id,
          name:  item.name
        }))
      ]
    },
    isActive (key) {
      return this.groupId === key
    },
    selectHandler (key) {
      this.$store.commit(GROUP_MUTATIONS.SET_GROUP_ID, key)
    },
  }
}
</script>

<style scoped>
.nav-link {
  color: #007bff;

}
.nav-link.active{

font-weight: bold;
}
</style>
